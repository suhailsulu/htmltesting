<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>


    <div class="">
        <button id="embed" onclick="embedCall()">pdf as embed</button>
        <button id="object" onclick="objectCall()">pdf as object</button>
    </div>
</head>

<body>

</body>
<script src="https://cdn.jsdelivr.net/npm/pdfjs-dist@2.16.105/build/pdf.min.js"></script>
<script src="invoicebase64.js" type="text/javascript"></script>
<script>
    function embedCall() {
        if (navigator.platform === "iPad") {
            //Ipad version
            let bytes = base64ToArrayBuffer(data);
            let docName = "testtstst";
            let reader = new FileReader();
            let out = new Blob([bytes], { type: 'application/pdf' });
            reader.onload = function (e) {
                let win = open('', "_blank");
                if (win === null || win === undefined) {
                    $.notify({
                        title: 'Allow Popups',
                        message: "Please allow popups for this site to view document."
                    }, {
                        allow_dismiss: true,
                        type: "danger",
                        placement: {
                            from: "top",
                            align: "center"
                        },
                        z_index: 2031,
                        delay: 5000
                    });
                } else {
                    let iframe = document.createElement('iframe'),
                        title = document.createElement('title');

                    title.appendChild(document.createTextNode(docName));

                    iframe.src = reader.result;
                    iframe.width = '100%';
                    iframe.height = '100%';
                    iframe.style.overflow = "scroll";
                    iframe.style.border = 'none';

                    win.document.head.appendChild(title);
                    win.document.body.appendChild(iframe);
                    win.document.body.style.margin = 0;
                }
            };
            reader.readAsDataURL(out);
        } else {
            let content = `data:application/pdf;base64, ${encodeURIComponent(data)}`;
            let pdfSrc = content;

            let html = `<html><title>test</title><object data="${pdfSrc}" type="application/pdf" width="100%" height="100%">
                        <iframe width="100%" height="100%" src="${pdfSrc}">
                        </iframe>
                    </object></html>`;

            let newPdfWindow = window.open("new window");
            newPdfWindow.document.write(html);
        }

    }
    function objectCall() {
    }
</script>

</html>